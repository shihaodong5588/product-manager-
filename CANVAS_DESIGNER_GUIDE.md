# 工业上位机原型画布设计器 - 使用指南

## 📋 功能概述

这是一个专为工业伺服压机上位机设计的可视化原型设计工具，完全替代了之前使用 Midjourney 的方案。

### 为什么不再使用 Midjourney？

1. **不可控性**：AI 生成的图片无法精确控制布局、文字和数值
2. **无法精确编辑**：局部修改功能不稳定，经常失败
3. **不是原型工具**：只能生成静态图片，无法交互
4. **时间浪费**：反复调试 prompt 和处理失败

### 新方案的优势

✅ **完全可控** - 拖拽式编辑，想改哪里改哪里
✅ **专业组件** - 内置工业风格 UI 组件库
✅ **实时预览** - 所见即所得的编辑体验
✅ **版本管理** - 支持迭代和版本控制
✅ **可导出** - 可导出为图片或代码

---

## 🚀 快速开始

### 1. 访问原型画布

打开系统后，在左侧导航栏点击 **"原型画布"**（图标：🖊️）

网址：`http://localhost:3000/canvas`

### 2. 创建新设计

1. 点击右上角的 **"新建画布"** 按钮
2. 进入设计器界面

### 3. 添加组件

在左侧组件库中，点击任意组件即可添加到画布：

- **📊 力-位移曲线** - 显示压力-位移实时曲线图
- **🔢 参数显示** - 显示数值参数（压力、位移等）
- **🔴 状态指示** - 显示设备运行状态
- **🔘 按钮** - 控制按钮（启动、停止等）
- **📦 面板** - 组织其他组件的容器

### 4. 编辑组件

- **拖拽移动**：直接用鼠标拖动组件到目标位置
- **自动对齐**：开启网格后，组件会自动对齐到网格
- **调整大小**：（当前版本暂不支持，后续会添加）

### 5. 配置画布

在右侧 **"画布设置"** 中可以调整：

- **宽度/高度**：设置画布尺寸（默认 1920×1080）
- **网格大小**：控制对齐精度（默认 20px）
- **缩放比例**：调整视图缩放（25%-100%）
- **显示网格**：切换网格显示

### 6. 保存设计

1. 填写 **设计标题** 和描述（可选）
2. 点击右上角 **"保存"** 按钮
3. 系统会自动保存并跳转到编辑页面

---

## 🎨 内置组件详解

### 1. 力-位移曲线图表

这是最核心的组件，用于显示压机的实时工作曲线。

**特性**：
- 深色工业主题
- 实时数据更新支持
- 包络线显示（上下限）
- 绿色荧光风格

**默认尺寸**：600 × 400 px

### 2. 参数显示

显示实时数值参数，如压力、位移、温度等。

**变体**：
- `normal` - 绿色（默认）
- `highlight` - 青色（高亮）
- `warning` - 黄色（警告）
- `danger` - 红色（危险）

**默认尺寸**：200 × 100 px

### 3. 状态指示器

显示设备运行状态的指示灯。

**状态类型**：
- `running` - 运行中（绿色，闪烁）
- `stopped` - 已停止（灰色）
- `error` - 错误（红色，闪烁）
- `warning` - 警告（黄色，闪烁）
- `ok` - 正常（绿色）

**默认尺寸**：150 × 40 px

### 4. 工业按钮

工业风格的控制按钮。

**变体**：
- `primary` - 主要操作（绿色）
- `secondary` - 次要操作（蓝色）
- `danger` - 危险操作（红色）
- `success` - 成功状态（绿色填充）
- `warning` - 警告操作（黄色）

**默认尺寸**：120 × 50 px

### 5. 面板容器

用于组织和包含其他组件。

**特性**：
- 带标题栏
- 深色背景
- 绿色边框

**默认尺寸**：400 × 300 px

---

## 📐 设计最佳实践

### 推荐的画布尺寸

- **1920 × 1080** - 标准 Full HD（默认）
- **1280 × 800** - 工业平板
- **1024 × 768** - 工业触摸屏

### 布局建议

1. **主曲线区域**：占据画布 50-60% 的空间
2. **参数显示区**：顶部或右侧，便于快速查看
3. **控制按钮区**：底部或右侧，避免误触
4. **状态指示**：顶部显著位置

### 配色方案

系统默认使用 **工业绿色荧光风格**：
- 主色：`#00ff00` (绿色)
- 背景：`#0a0a0a` (纯黑)
- 边框：`#00ff00` 30% 透明度
- 警告色：`#ff6b00` (橙色)

---

## 🔄 版本管理

### 创建新版本

1. 打开已有设计
2. 点击 **"创建新版本"** 按钮
3. 系统会复制当前设计并增加版本号

### 标记为最终版本

对于已完成的设计，点击 **"标记为最终版本"** 将其状态改为 `final`。

---

## 💾 数据保存

所有设计数据保存在数据库的 `Prototype` 表中：

```typescript
{
  id: string
  title: string
  description: string
  generationType: 'canvas_design'
  platform: 'industrial'
  styleType: 'industrial_hmi'
  canvasData: {
    components: CanvasComponent[]
    width: number
    height: number
    gridSize: number
  }
  canvasSettings: {
    showGrid: boolean
    theme: string
    backgroundColor: string
  }
  status: 'draft' | 'final' | 'archived'
  version: number
  createdAt: Date
  updatedAt: Date
}
```

---

## 🎯 实际应用场景

### 场景 1：压机控制界面

设计一个包含以下元素的界面：
1. 中央大型力-位移曲线图
2. 顶部 4 个参数显示（当前压力、位移、温度、油压）
3. 右侧控制面板（启动、停止、复位按钮）
4. 左上角状态指示器

### 场景 2：多工位监控

设计一个同时监控 4 个压机工位的界面：
1. 2×2 网格布局
2. 每个网格包含一个小型曲线图和关键参数
3. 底部总控制面板

### 场景 3：工艺参数设置

设计一个参数配置界面：
1. 左侧参数列表（输入框）
2. 右侧实时预览曲线
3. 底部保存/应用按钮

---

## 🔧 API 接口

### 获取所有设计

```
GET /api/industrial-designs
```

### 创建新设计

```
POST /api/industrial-designs
Body: {
  title: string
  description?: string
  canvasData: object
  canvasSettings: object
}
```

### 获取单个设计

```
GET /api/industrial-designs/:id
```

### 更新设计

```
PATCH /api/industrial-designs/:id
Body: {
  title?: string
  description?: string
  canvasData?: object
  canvasSettings?: object
  status?: string
}
```

### 创建新版本

```
POST /api/industrial-designs/:id/version
Body: {
  title?: string
  canvasData: object
  canvasSettings: object
}
```

### 删除设计

```
DELETE /api/industrial-designs/:id
```

---

## 🎬 示例演示

### 查看完整演示

访问 `/industrial-demo` 查看一个完整的工业压机上位机界面示例，包含：

- 实时力-位移曲线动画
- 模拟压机工作流程（压下→保持→释放）
- 参数实时更新
- 状态指示变化
- 控制按钮交互

网址：`http://localhost:3000/industrial-demo`

---

## ❓ 常见问题

### Q: 如何导出为图片？

A: 导出功能正在开发中，即将推出。

### Q: 可以导出为代码吗？

A: 是的，未来版本会支持导出为 React 组件代码。

### Q: 数据库连接失败怎么办？

A: 确保 `.env` 文件中的 `DATABASE_URL` 配置正确。当前如果数据库未连接，功能仍可使用但无法保存。

### Q: 能否自定义组件？

A: 当前版本提供固定的组件库。未来会支持自定义组件。

### Q: 如何删除组件？

A: 选中组件后按 `Delete` 键（功能开发中）。当前可以通过"清空画布"重新开始。

---

## 🚧 路线图

### v1.1（即将推出）
- ✅ 组件删除功能
- ✅ 组件大小调整
- ✅ 组件属性编辑面板
- ✅ 撤销/重做功能

### v1.2
- ✅ 导出为 PNG/SVG
- ✅ 导出为 React 代码
- ✅ 模板库
- ✅ 组件复制/粘贴

### v2.0
- ✅ 自定义组件
- ✅ 组件样式编辑器
- ✅ 交互原型预览
- ✅ 多人协作

---

## 📞 技术支持

如有问题或建议，请联系开发团队或在项目中提 Issue。

**开发者**：Claude Code
**版本**：v1.0
**更新时间**：2025-10-23
